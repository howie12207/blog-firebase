(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{364:function(t,e,r){"use strict";r.r(e);var n=r(1).default.extend({name:"ModifyArticle",props:{target:{type:String,default:""},article:{type:Object,default:function(){return{}}},sorts:{type:Array,default:function(){return[]}}},data:function(){return{contentTab:"html",title:{value:"",isValid:!1},content:"",editorOption:{bounds:"app",placeholder:"",modules:{toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["image"]]}}},checkList:[]}},watch:{article:function(){this.title.value=this.article.title,this.title.isValid=!0,this.content=this.article.content,this.checkList=this.article.sorts?this.article.sorts:[]}},methods:{changeTab:function(t){var e=document.querySelector(".ql-toolbar");e&&e.parentNode.removeChild(e),this.contentTab=t},onEditorChange:function(t){var html=t.html;this.content=html},submit:function(){if(this.title.isValid)if(this.content){var t=Date.now();this.$emit("submit",{title:this.title.value,content:this.content,createTime:this.target?this.article.createTime:t,updateTime:t,sorts:this.checkList})}else this.$message.error("請填寫內容");else this.$message.error("請填寫標題")}}}),c=r(5),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"p-4"},[r("BaseInput",{attrs:{label:"標題","is-valid":t.title.isValid},on:{"update:isValid":function(e){return t.$set(t.title,"isValid",e)},"update:is-valid":function(e){return t.$set(t.title,"isValid",e)}},model:{value:t.title.value,callback:function(e){t.$set(t.title,"value",e)},expression:"title.value"}}),t._v(" "),r("div",{staticClass:"text-sm text-gray-500"},[t._v("分類")]),t._v(" "),r("el-checkbox-group",{staticClass:"my-4",model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.sorts,(function(t,e){return r("el-checkbox",{key:e,attrs:{label:t.title}})})),1),t._v(" "),r("div",{staticClass:"text-sm text-gray-500"},[t._v("內容")]),t._v(" "),r("div",{staticClass:"flex my-4"},[r("div",{class:["btn","btn-primary","hover:btn-primary","mr-4",{"btn-primary-active":"html"===t.contentTab}],on:{click:function(e){return t.changeTab("html")}}},[t._v("\n            HTML\n        ")]),t._v(" "),r("div",{class:["btn","btn-secondary","hover:btn-secondary",,{"btn-secondary-active":"editor"===t.contentTab}],on:{click:function(e){return t.changeTab("editor")}}},[t._v("\n            文本編輯\n        ")])]),t._v(" "),"html"===t.contentTab?r("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}):r("div",{directives:[{name:"quill",rawName:"v-quill:myQuillEditor",value:t.editorOption,expression:"editorOption",arg:"myQuillEditor"}],staticStyle:{height:"480px"},attrs:{content:t.content},on:{change:function(e){return t.onEditorChange(e)}}}),t._v(" "),r("div",{staticClass:"btn btn-primary hover:btn-primary w-20 my-4",on:{click:t.submit}},[t._v("\n        送出\n    ")])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{BaseInput:r(214).default})},388:function(t,e,r){"use strict";r.r(e);r(53),r(216),r(33);var n=r(4),c=r(1).default.extend({name:"ManageArticleId",layout:"backstage",meta:{layout:"backstage"},data:function(){return{article:{},sorts:[]}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.getSorts();case 3:return e.next=5,t.getArticle();case 5:case"end":return e.stop()}}),e)})))()},methods:{getSorts:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("getSorts");case 3:r=e.sent,t.sorts=r,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getArticle:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.$route.path.split("/manageArticle/")[1],e.next=4,t.$store.dispatch("getArticle",r);case 4:n=e.sent,t.article=n,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},updateArticle:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=e.$route.path.split("/manageArticle/")[1],t.id=n,r.next=5,e.$store.dispatch("updateArticle",t);case 5:e.$router.push("/backstage/manageArticle"),r.next=10;break;case 8:r.prev=8,r.t0=r.catch(0);case 10:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}}),l=r(5),component=Object(l.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("ModifyArticle",{attrs:{target:"modify",article:this.article,sorts:this.sorts},on:{submit:this.updateArticle,getArticle:this.getArticle}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ModifyArticle:r(364).default})}}]);