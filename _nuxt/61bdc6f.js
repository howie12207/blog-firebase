(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{364:function(t,e,n){"use strict";n.r(e);var r=n(1).default.extend({name:"ModifyArticle",props:{target:{type:String,default:""},article:{type:Object,default:function(){return{}}},sorts:{type:Array,default:function(){return[]}}},data:function(){return{contentTab:"html",title:{value:"",isValid:!1},content:"",editorOption:{bounds:"app",placeholder:"",modules:{toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["image"]]}}},checkList:[]}},watch:{article:function(){this.title.value=this.article.title,this.title.isValid=!0,this.content=this.article.content,this.checkList=this.article.sorts?this.article.sorts:[]}},methods:{changeTab:function(t){var e=document.querySelector(".ql-toolbar");e&&e.parentNode.removeChild(e),this.contentTab=t},onEditorChange:function(t){var html=t.html;this.content=html},submit:function(){if(this.title.isValid)if(this.content){var t=Date.now();this.$emit("submit",{title:this.title.value,content:this.content,createTime:this.target?this.article.createTime:t,updateTime:t,sorts:this.checkList})}else this.$message.error("請填寫內容");else this.$message.error("請填寫標題")}}}),c=n(5),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-4"},[n("BaseInput",{attrs:{label:"標題","is-valid":t.title.isValid},on:{"update:isValid":function(e){return t.$set(t.title,"isValid",e)},"update:is-valid":function(e){return t.$set(t.title,"isValid",e)}},model:{value:t.title.value,callback:function(e){t.$set(t.title,"value",e)},expression:"title.value"}}),t._v(" "),n("div",{staticClass:"text-sm text-gray-500"},[t._v("分類")]),t._v(" "),n("el-checkbox-group",{staticClass:"my-4",model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.sorts,(function(t,e){return n("el-checkbox",{key:e,attrs:{label:t.title}})})),1),t._v(" "),n("div",{staticClass:"text-sm text-gray-500"},[t._v("內容")]),t._v(" "),n("div",{staticClass:"flex my-4"},[n("div",{class:["btn","btn-primary","hover:btn-primary","mr-4",{"btn-primary-active":"html"===t.contentTab}],on:{click:function(e){return t.changeTab("html")}}},[t._v("\n            HTML\n        ")]),t._v(" "),n("div",{class:["btn","btn-secondary","hover:btn-secondary",,{"btn-secondary-active":"editor"===t.contentTab}],on:{click:function(e){return t.changeTab("editor")}}},[t._v("\n            文本編輯\n        ")])]),t._v(" "),"html"===t.contentTab?n("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}):n("div",{directives:[{name:"quill",rawName:"v-quill:myQuillEditor",value:t.editorOption,expression:"editorOption",arg:"myQuillEditor"}],staticStyle:{height:"480px"},attrs:{content:t.content},on:{change:function(e){return t.onEditorChange(e)}}}),t._v(" "),n("div",{staticClass:"btn btn-primary hover:btn-primary w-20 my-4",on:{click:t.submit}},[t._v("\n        送出\n    ")])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{BaseInput:n(214).default})},377:function(t,e,n){"use strict";n.r(e);var r=n(1).default.extend({name:"AddArticlePage"}),c=n(5),component=Object(c.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("ModifyArticle",this._g(this._b({},"ModifyArticle",this.$attrs,!1),this.$listeners))],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ModifyArticle:n(364).default})},385:function(t,e,n){"use strict";n.r(e);n(33);var r=n(4),c=n(1).default.extend({name:"AddArticle",layout:"backstage",meta:{layout:"backstage"},data:function(){return{sorts:[]}},created:function(){this.getSorts()},methods:{getSorts:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("getSorts");case 3:n=e.sent,t.sorts=n,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},submit:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("createArticle",t);case 3:e.$router.push("/backstage/manageArticle"),n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:case"end":return n.stop()}}),n,null,[[0,6]])})))()}}}),l=n(5),component=Object(l.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("AddArticlePage",{attrs:{sorts:this.sorts},on:{submit:this.submit}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AddArticlePage:n(377).default})}}]);